pkgname=we10x-icon-theme
pkgver=20250716
pkgrel=1
pkgdesc='A colorful design icon theme for Linux desktop'
arch=(any)
url='https://store.kde.org/p/1366371'
license=(GPL-3.0-only)  # CHECKME
groups=(we10xos-theme)
makedepends=(git)
options=(!strip)
_commit=51ade47e434cbfbd73a64d9a16c6fbc1319f0abf
source=(git+https://github.com/yeyushengfan258/We10X-icon-theme.git#commit=${_commit})
sha384sums=('e7dfa809289f8c599db302efb7f8e96420bd8420b2394be01decb8920784af56424f264c3323ed1c2279eebd0fa005ac')
b2sums=('f31d500872c3211f752c795d8d2c5f2a0a6b7cfb3a31f6bbea9804326709f0be4a691a0f57298610be50ddee25d89fe9ab62e689f764a67d45efad74d3a4b334')

prepare() {
    # Don't trigger icon cache update when installing
    sed '/gtk-update-icon-cache/d' -i We10X-icon-theme/install.sh
}

package() {
    cd We10X-icon-theme
    ./install.sh -d "${pkgdir}/usr/share/icons" -t all
    # This removes broken symlinks created by the script
    find "${pkgdir}/usr/share/icons" -type l \
        -exec sh -c 'for x; do [[ -e $x ]] || rm -v -f "$x"; done' _ {} +
}
